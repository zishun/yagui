!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.yagui=e():t.yagui=e()}(window,function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){var o={GuiMain:n(1).default};t.exports=o},function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n.r(e);var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"_getInitialValue",value:function(t,e){return"string"!=typeof e?t:t[e]}},{key:"_getCheckCallback",value:function(t,e){return"string"!=typeof e?e:function(n){t[e]=n}}},{key:"_setDomContainer",value:function(t){this.domContainer=t}},{key:"setCallback",value:function(t){this.callback=t}},{key:"setVisibility",value:function(t){this.domContainer&&(this.domContainer.hidden=!t)}}])&&o(e.prototype,n),r&&o(e,r),t}();function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=f(t);if(e){var r=f(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return c(this,n)}}function c(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(c,r);var e,n,o,i=l(c);function c(t,e,n){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),o=i.call(this);var r=n?e[n].bind(e):e;return o.domButton=document.createElement("button"),o.domButton.className="gui-button",o.domButton.innerHTML=t||"",o.domButton.addEventListener("click",o._onClick.bind(s(o))),o.setCallback(r),o}return e=c,(n=[{key:"setEnable",value:function(t){this.domButton.disabled=void 0!==t&&!t}},{key:"_onClick",value:function(){this.callback&&this.callback()}}])&&u(e.prototype,n),o&&u(e,o),c}();function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=v(t);if(e){var r=v(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return m(this,n)}}function m(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(u,r);var e,n,o,i=b(u);function u(t,e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var o=(n=i.call(this))._getInitialValue(t,e),r=n._getCheckCallback(t,e);return n.domCheckbox=document.createElement("input"),n.domCheckbox.className="gui-input-checkbox",n.domCheckbox.type="checkbox",n.domLabelCheckbox=document.createElement("label"),n.setValue(void 0===o||o),n.setCallback(r),n}return e=u,(n=[{key:"_onMouseDown",value:function(){this.setValue(!this.domCheckbox.checked)}},{key:"setValue",value:function(t,e){this.domCheckbox.checked=t,!e&&this.callback&&this.callback(t)}},{key:"getValue",value:function(){return this.domCheckbox.checked}}])&&h(e.prototype,n),o&&h(e,o),u}(),w={rgbToHsv:function(t){var e=t[0],n=t[1],o=t[2],r=Math.max(e,n,o),i=Math.min(e,n,o);return i===r?[0,0,i]:[((e===i?3:o===i?1:5)-(e===i?n-o:o===i?e-n:o-e)/(r-i))/6,(r-i)/r,r]},hsvToRgb:function(t){var e=6*t[0],n=t[1],o=t[2],r=Math.floor(e),i=e-r,u=o*(1-n),a=o*(1-i*n),l=o*(1-(1-i)*n),c=r%6;return 0===c?[o,l,u]:1===c?[a,o,u]:2===c?[u,o,l]:3===c?[u,a,o]:4===c?[l,u,o]:[o,u,a]},getValidColor:function(t){for(var e=0,n=t.length;e<n;++e)t[e]=Math.max(0,Math.min(1,t[e]));return t},getStrColor:function(t){return 3===t.length?w.rgbToHex(t):"rgba("+Math.round(255*t[0])+","+Math.round(255*t[1])+","+Math.round(255*t[2])+","+t[3]+")"},getColorMult:function(t,e){var n=[t[0]*e,t[1]*e,t[2]*e];return 4===t.length&&n.push(t[3]),w.getValidColor(n)},getColorAdd:function(t,e){var n=[t[0]+e,t[1]+e,t[2]+e];return 4===t.length&&n.push(t[3]),w.getValidColor(n)},rgbToHex:function(t){for(var e="#",n=0;n<3;++n){var o=Math.round(255*t[n]).toString(16);e+=1===o.length?"0"+o:o}return e},hexToRgb:function(t){var e=0;"#"===t[0]&&(t=t.slice(1));var n=t;if(t.length>6)n=t.slice(0,6);else if(t.length<6)for(n="",e=0;e<3;++e)n+=t[e]?t[e]+t[e]:"00";var o=[0,0,0];for(e=0;e<3;++e){var r=parseInt(n[2*e]+n[2*e+1],16);o[e]=(r!=r?0:r)/255}return o}},_=w;function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=R(t);if(e){var r=R(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return O(this,n)}}function O(t,e){if(e&&("object"===k(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return T(t)}function T(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R(t){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var E=["-moz-","-o-","-webkit-","-ms-",""],j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(u,r);var e,n,o,i=x(u);function u(t,e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var o=(n=i.call(this))._getInitialValue(t,e),r=n._getCheckCallback(t,e);n.color=o?_.getValidColor(o.slice()):[1,0,0],n.domColor=document.createElement("div"),n.domColor.className="gui-widget-color",n.domInputColor=document.createElement("input"),n.domPopup=document.createElement("div"),n.domHue=document.createElement("div"),n.domHue.className="gui-color-hue",n.domHueKnob=document.createElement("div"),n.domHueKnob.className="gui-knob-hue",n.domSaturation=document.createElement("div"),n.domSaturation.className="gui-color-saturation";var a=document.createElement("div");return n.domSaturation.appendChild(a),n.domSaturationKnob=document.createElement("div"),n.domSaturationKnob.className="gui-knob-saturation",n.domHue.appendChild(n.domHueKnob),n.domPopup.appendChild(n.domSaturationKnob),n.domPopup.appendChild(n.domSaturation),n.domPopup.appendChild(n.domHue),n.domColor.appendChild(n.domInputColor),n.domColor.appendChild(n.domPopup),n._hueGradient(n.domHue),n._linearGradient(a,"top","rgba(0,0,0,0)","#000"),n.domColor.addEventListener("keydown",n._onInputDown.bind(T(n))),n.domSaturation.addEventListener("mousedown",n._onSaturationDown.bind(T(n))),n.domHue.addEventListener("mousedown",n._onHueDown.bind(T(n))),window.addEventListener("mouseup",n._onMouseUp.bind(T(n))),window.addEventListener("mouseout",n._onMouseUp.bind(T(n))),window.addEventListener("mousemove",n._onMouseMove.bind(T(n))),n.hasAlpha=4===n.color.length,n.alpha=1,n.hasAlpha&&(n.domPopup.style.width="142px",n.domAlpha=document.createElement("div"),n.domAlpha.className="gui-color-alpha",n.domAlphaKnob=document.createElement("div"),n.domAlphaKnob.className="gui-knob-alpha",n._alphaGradient(n.domAlpha,"top","rgba(0,0,0,1.0)","rgba(0,0,0,0.0)"),n.domAlpha.addEventListener("mousedown",n._onAlphaDown.bind(T(n))),n.domAlpha.appendChild(n.domAlphaKnob),n.domPopup.appendChild(n.domAlpha)),n.editHue=n.editSaturation=n.editAlpha=!1,n.widgetHeight=n.widgetWidth=100,n.setValue(n.color),n.setCallback(r),n}return e=u,(n=[{key:"_onInputDown",value:function(t){t.stopPropagation(),13===t.keyCode&&this.setValue(_.hexToRgb(t.target.value))}},{key:"_onUpdateSaturation",value:function(t){var e=this.domSaturation.getBoundingClientRect(),n=_.rgbToHsv(this.getValue());n[1]=Math.min(1,Math.max(0,(t.clientX-e.left)/e.width)),n[2]=Math.min(1,Math.max(0,1-(t.clientY-e.top)/e.width)),this.setValue(_.hsvToRgb(n),!1,!0),this._updateGui()}},{key:"_onUpdateHue",value:function(t){var e=this.domHue.getBoundingClientRect(),n=_.rgbToHsv(this.getValue());n[0]=Math.min(1,Math.max(0,1-(t.clientY-e.top)/e.height)),this.setValue(_.hsvToRgb(n),!1,!0),this._updateGui()}},{key:"_onUpdateAlpha",value:function(t){var e=this.domAlpha.getBoundingClientRect(),n=this.getValue();n[3]=this.alpha=Math.min(1,Math.max(0,1-(t.clientY-e.top)/e.height)),this.setValue(n,!1,!0),this._updateGui()}},{key:"_updateGui",value:function(){var t=this.getValue(),e=_.rgbToHsv(t);this.domSaturationKnob.style.marginLeft=this.widgetWidth*e[1]-7+"px",this.domSaturationKnob.style.marginTop=this.widgetHeight*(1-e[2])-7+"px",e[1]=e[2]=1,this._linearGradient(this.domSaturation,"left","#fff",_.getStrColor(_.hsvToRgb(e))),this.domHueKnob.style.marginTop=(1-e[0])*this.widgetHeight+"px",this.hasAlpha&&void 0!==t[3]&&(this.domAlphaKnob.style.marginTop=(1-this.alpha)*this.widgetHeight+"px")}},{key:"_onMouseMove",value:function(t){if(this.editSaturation||this.editHue||this.editAlpha)return this.editSaturation?this._onUpdateSaturation(t):this.editHue?this._onUpdateHue(t):this.editAlpha?this._onUpdateAlpha(t):void 0}},{key:"_onSaturationDown",value:function(t){this.editSaturation=!0,this._onMouseMove(t)}},{key:"_onHueDown",value:function(t){this.editHue=!0,this._onMouseMove(t)}},{key:"_onAlphaDown",value:function(t){this.editAlpha=!0,this._onMouseMove(t)}},{key:"_onMouseUp",value:function(){this.editHue=this.editSaturation=this.editAlpha=!1}},{key:"_hueGradient",value:function(t){t.style.background="";for(var e=0,n=E.length;e<n;++e)t.style.cssText+="background: "+E[e]+"linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);"}},{key:"_alphaGradient",value:function(t,e,n,o){t.style.background="";for(var r=0,i=E.length;r<i;++r)t.style.cssText+="background: "+E[r]+"linear-gradient("+e+", "+n+","+o+'),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAChJREFUeNpiPHPmDAMMGBsbw9lMDDgA6RKM%2F%2F%2F%2Fh3POnj1LCzsAAgwAQtYIcFfEyzkAAAAASUVORK5CYII%3D");'}},{key:"_linearGradient",value:function(t,e,n,o){t.style.background="";for(var r=0,i=E.length;r<i;++r)t.style.cssText+="background: "+E[r]+"linear-gradient("+e+", "+n+" 0%, "+o+" 100%);"}},{key:"setValue",value:function(t,e,n){for(var o=this.color,r=0,i=t.length;r<i;++r)o[r]=t[r];var u=_.rgbToHex(t);if(this.domInputColor.value=u,this.hasAlpha){t.length>=4?this.alpha=t[3]:t.push(this.alpha);var a="rgba("+parseInt(255*t[0],10)+","+parseInt(255*t[1],10)+","+parseInt(255*t[2],10)+","+this.alpha+")";this._alphaGradient(this.domInputColor,"0deg",a,a)}else this.domInputColor.style.background=u;var l=_.rgbToHsv(t);this.domSaturationKnob.style.borderColor=l[2]<.5||l[1]>.5?"#fff":"#000",this.domInputColor.style.color=this.alpha>.2&&(l[2]<.5||l[1]>.5)?"#fff":"#000",n||this._updateGui(),!e&&this.callback&&this.callback(t)}},{key:"getValue",value:function(){return this.color}}])&&C(e.prototype,n),o&&C(e,o),u}();function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function A(t,e){return(A=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function V(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=L(t);if(e){var r=L(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return B(this,n)}}function B(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return D(t)}function D(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var I=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&A(t,e)}(u,r);var e,n,o,i=V(u);function u(t,e,n){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var r=(o=i.call(this))._getInitialValue(t,e),a=o._getCheckCallback(t,e);return n=n||{},r=void 0!==r?r:n[0],o.isArray=void 0!==n.length,o.domSelect=document.createElement("select"),o.domSelect.className="gui-select",o.addOptions(n),o.domSelect.addEventListener("change",o._onChange.bind(D(o))),o.setValue(r),o.setCallback(a),o}return e=u,(n=[{key:"_parseValue",value:function(t){return this.isArray?parseInt(t,10):t}},{key:"_onChange",value:function(t){this.setValue(t.target.value)}},{key:"addOptions",value:function(t){for(var e=Object.keys(t),n=0;n<e.length;++n){var o=document.createElement("option");o.innerHTML=t[e[n]],o.value=e[n],this.domSelect.appendChild(o)}}},{key:"setValue",value:function(t,e){this.domSelect.value=t,!e&&this.callback&&this.callback(this._parseValue(t))}},{key:"getValue",value:function(){return this._parseValue(this.domSelect.value)}}])&&M(e.prototype,n),o&&M(e,o),u}();function H(t){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function z(t,e){return(z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function W(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=G(t);if(e){var r=G(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return N(this,n)}}function N(t,e){if(e&&("object"===H(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return K(t)}function K(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function G(t){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var F=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&z(t,e)}(u,r);var e,n,o,i=W(u);function u(t,e,n,o,r){var a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var l=(a=i.call(this))._getInitialValue(t,e),c=a._getCheckCallback(t,e);return l=void 0!==l?l:100,n=void 0!==n?n:0,o=void 0!==o?o:200,r=void 0!==r?r:1,a.domSlider=document.createElement("div"),a.domSlider.className="gui-slider",a.domSliderFill=document.createElement("div"),a.domSlider.appendChild(a.domSliderFill),a.domInputText=document.createElement("input"),a.domInputText.className="gui-input-number",a.domInputText.type="number",a.min=a.domInputText.min=n,a.max=a.domInputText.max=o,a.step=a.domInputText.step=r,a.domInputText.addEventListener("keydown",a._onKeyDown.bind(K(a))),a.domInputText.addEventListener("change",a._onInputText.bind(K(a))),a.domInputText.addEventListener("blur",a._onInputText.bind(K(a))),a.domSlider.addEventListener("mousedown",a._onMouseDown.bind(K(a))),window.addEventListener("mouseup",a._onMouseUp.bind(K(a)),!0),window.addEventListener("mousemove",a._onMouseMove.bind(K(a))),a.lastValue=l,a.isDown=!1,a.setValue(l),a.setCallback(c),a}return e=u,(n=[{key:"_onInputText",value:function(t){var e=parseFloat(t.target.value);e==e&&e!==this.lastValue&&this.setValue(e)}},{key:"_onKeyDown",value:function(t){t.stopPropagation(),13===t.which&&this.domInputText.blur()}},{key:"_onMouseMove",value:function(t){if(t.preventDefault(),this.isDown){var e=this.domSlider.getBoundingClientRect(),n=this.min+(this.max-this.min)*((t.clientX-e.left)/e.width);this.setValue(n)}}},{key:"_onMouseDown",value:function(t){this.isDown=!0,this._onMouseMove(t)}},{key:"_onMouseUp",value:function(){this.isDown=!1}},{key:"_setDomContainer",value:function(t){this.domContainer=t}},{key:"getValue",value:function(){return parseFloat(this.domInputText.value)}},{key:"setValue",value:function(t,e){this.lastValue=t,t=Math.max(Math.min(t,this.max),this.min),t=Math.round(t/this.step)*this.step,this.domInputText.value=t;var n=this.min;this.max!==this.min&&(n=(t-this.min)/(this.max-this.min)),this.domSliderFill.style.width=100*n+"%",!e&&this.callback&&this.callback(t)}},{key:"setMax",value:function(t){return this.domInputText.max=this.max=t,this}},{key:"setMin",value:function(t){return this.min=t,this}}])&&U(e.prototype,n),o&&U(e,o),u}();function X(t){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Z(t,e){return(Z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function J(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=q(t);if(e){var r=q(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Q(this,n)}}function Q(t,e){if(e&&("object"===X(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Z(t,e)}(u,r);var e,n,o,i=J(u);function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this)).domText=document.createElement("div"),e.domText.innerHTML=t||"",e.domText.className="group-title",e}return e=u,(n=[{key:"setText",value:function(t){this.domText.innerHTML=t}},{key:"setVisibility",value:function(t){this.domText.hidden=!t}}])&&Y(e.prototype,n),o&&Y(e,o),u}();function tt(t){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function et(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function nt(t,e){return(nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ot(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=it(t);if(e){var r=it(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return rt(this,n)}}function rt(t,e){if(e&&("object"===tt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function it(t){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ut=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nt(t,e)}(u,r);var e,n,o,i=ot(u);function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this)).domText=document.createElement("div"),e.domText.innerHTML=t||"",e.domText.className="normal-text",e}return e=u,(n=[{key:"setText",value:function(t){this.domText.innerHTML=t}},{key:"setVisibility",value:function(t){this.domText.hidden=!t}}])&&et(e.prototype,n),o&&et(e,o),u}();function at(t){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ct(t,e){return(ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function st(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=pt(t);if(e){var r=pt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return ft(this,n)}}function ft(t,e){if(e&&("object"===at(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return dt(t)}function dt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pt(t){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ht=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ct(t,e)}(u,r);var e,n,o,i=st(u);function u(t,e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var o=(n=i.call(this))._getInitialValue(t,e),r=n._getCheckCallback(t,e);return o=void 0!==o?o:100,n.domInputText=document.createElement("input"),n.domInputText.className="gui-input-number",n.domInputText.type="number",n.domInputText.addEventListener("keydown",n._onKeyDown.bind(dt(n))),n.domInputText.addEventListener("change",n._onInputText.bind(dt(n))),n.domInputText.addEventListener("blur",n._onInputText.bind(dt(n))),n.lastValue=o,n.isDown=!1,n.setValue(o),n.setCallback(r),n}return e=u,(n=[{key:"_onInputText",value:function(t){var e=parseFloat(t.target.value);e==e&&e!==this.lastValue&&this.setValue(e)}},{key:"_onKeyDown",value:function(t){t.stopPropagation(),13===t.which&&this.domInputText.blur()}},{key:"_setDomContainer",value:function(t){this.domContainer=t}},{key:"getValue",value:function(){return parseFloat(this.domInputText.value)}},{key:"setValue",value:function(t,e){this.lastValue=t,this.domInputText.value=t;this.min;!e&&this.callback&&this.callback(t)}}])&&lt(e.prototype,n),o&&lt(e,o),u}();function yt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var bt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,(n=[{key:"_addLine",value:function(t){var e=document.createElement("li");return e.innerHTML=t||"",this.domUl.appendChild(e),e}},{key:"_createLabel",value:function(t){var e=document.createElement("label");return e.className="gui-label-side",e.innerHTML=t||"",e}},{key:"_setDomContainer",value:function(t){this.domContainer=t}},{key:"addTitle",value:function(t){var e=new $(t);return this.domUl.appendChild(e.domText),e}},{key:"addText",value:function(t){var e=new ut(t);return this.domUl.appendChild(e.domText),e}},{key:"addCheckbox",value:function(t,e,n){var o=new g(e,n),r=this._addLine();r.className+=" gui-pointerOnHover gui-glowOnHover";var i=this._createLabel(t);return i.style.overflow="visible",i.className+=" gui-pointerOnHover",r.appendChild(i),r.appendChild(o.domCheckbox),r.appendChild(o.domLabelCheckbox),r.addEventListener("mousedown",o._onMouseDown.bind(o)),o._setDomContainer(r),o}},{key:"addCombobox",value:function(t,e,n,o){var r=new I(e,n,o),i=this._addLine();return t?i.appendChild(this._createLabel(t)):r.domSelect.style.width="100%",i.appendChild(r.domSelect),r._setDomContainer(i),r}},{key:"addSlider",value:function(t,e,n,o,r,i){var u=new F(e,n,o,r,i),a=this._addLine();return t&&a.appendChild(this._createLabel(t)),a.appendChild(u.domInputText),a.appendChild(u.domSlider),u._setDomContainer(a),u}},{key:"addNumberBox",value:function(t,e,n){var o=new ht(e,n),r=this._addLine();return t&&r.appendChild(this._createLabel(t)),r.appendChild(o.domInputText),o._setDomContainer(r),o}},{key:"addColor",value:function(t,e,n){var o=new j(e,n),r=this._addLine();return t?r.appendChild(this._createLabel(t)):o.domColor.style.width="100%",r.appendChild(o.domColor),o._setDomContainer(r),o}},{key:"addButton",value:function(t,e,n){var o=new d(t,e,n),r=this._addLine();return r.appendChild(o.domButton),o._setDomContainer(r),o}},{key:"addDualButton",value:function(t,e,n,o,r,i){var u=new d(t,n,r),a=new d(e,o,i),l=this._addLine();l.appendChild(a.domButton),l.appendChild(u.domButton);var c=u.domButton.style,s=a.domButton.style;return c.width=s.width="49%",c.marginRight=s.marginLeft="1%",u._setDomContainer(l),a._setDomContainer(l),[u,a]}},{key:"setVisibility",value:function(t){this.domContainer&&(this.domContainer.hidden=!t)}}])&&yt(e.prototype,n),o&&yt(e,o),t}();function mt(t){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function gt(t,e){return(gt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=Ct(t);if(e){var r=Ct(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return _t(this,n)}}function _t(t,e){if(e&&("object"===mt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return kt(t)}function kt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ct(t){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var St=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gt(t,e)}(i,bt);var e,n,o,r=wt(i);function i(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this)).domUl=document.createElement("ul"),e.domUl.setAttribute("opened",!0);var n=document.createElement("label");return n.innerHTML=t||"",n.addEventListener("mousedown",e._onMouseDown.bind(kt(e))),e.domUl.appendChild(n),e.isOpen=!0,e}return e=i,(n=[{key:"_onMouseDown",value:function(){this.isOpen=!this.isOpen,this.domUl.setAttribute("opened",this.isOpen)}},{key:"open",value:function(){this.isOpen=!0,this.domUl.setAttribute("opened",!0)}},{key:"close",value:function(){this.isOpen=!1,this.domUl.setAttribute("opened",!1)}},{key:"setVisibility",value:function(t){t?this.isOpen&&this.domUl.setAttribute("opened",!0):this.domUl.setAttribute("opened",!1),this.domUl.style.height=t?"auto":"0px"}}])&&vt(e.prototype,n),o&&vt(e,o),i}();function xt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Ot=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.domSidebar=document.createElement("div"),this.domSidebar.className="gui-sidebar",this.domResize=document.createElement("div"),this.domResize.className="gui-resize",this.isDragging=!1,this.mouseX=0,this.domResize.addEventListener("mousedown",this._onMouseDown.bind(this)),window.addEventListener("mousemove",this._onMouseMove.bind(this)),window.addEventListener("mouseup",this._onMouseUp.bind(this)),this.callbackResize=e,this.isOnTheRight=!1}var e,n,o;return e=t,(n=[{key:"_setTop",value:function(t){this.domSidebar.style.top=this.domResize.style.top=t+"px"}},{key:"_onTheRight",value:function(){this.isOnTheRight=!0,this.domSidebar.style.right=0,this.domSidebar.style.borderRight=0,this.domSidebar.style.borderLeft="double",this.domSidebar.style.borderColor="rgba(255,255,255,0.3)",this.domResize.style.left="auto",this.domResize.style.right=this.domSidebar.offsetWidth+"px",this.domResize.style.marginRight="-3px"}},{key:"_onMouseDown",value:function(t){this.isDragging=!0,this.mouseX=t.clientX}},{key:"_updateViewportPosition",value:function(t){var e=this.domSidebar.hidden?0:this.domSidebar.offsetWidth;this.isOnTheRight?t.style.width=t.clientWidth-e+"px":(t.style.left=this.domSidebar.offsetLeft+e+"px",t.style.width=t.clientWidth-e+"px")}},{key:"_onMouseMove",value:function(t){if(!1!==this.isDragging){var e=t.clientX,n=e-this.mouseX;this.isOnTheRight&&(n=-n);var o=Math.max(50,this.domSidebar.offsetWidth+n)+"px";this.domSidebar.style.width=o,this.isOnTheRight?this.domResize.style.right=this.domSidebar.offsetWidth+"px":this.domResize.style.left=o,this.mouseX=e,this.callbackResize()}}},{key:"_onMouseUp",value:function(){this.isDragging=!1}},{key:"addMenu",value:function(t){var e=new St(t);return this.domSidebar.appendChild(e.domUl),e}},{key:"setVisibility",value:function(t){this.domSidebar.hidden=!t,this.domResize.hidden=!t,this.callbackResize()}}])&&xt(e.prototype,n),o&&xt(e,o),t}();function Tt(t){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Et(t,e){return(Et=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=Mt(t);if(e){var r=Mt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Pt(this,n)}}function Pt(t,e){if(e&&("object"===Tt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Mt(t){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var At=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Et(t,e)}(u,r);var e,n,o,i=jt(u);function u(t,e,n){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),o=i.call(this);var r=t;return r&&"function"!=typeof r?r=t[e].bind(t):n=e,o.domSpan=document.createElement("span"),o.domSpan.className="shortcut",o.domSpan.innerHTML=n||"",o.setCallback(r),o}return e=u,(n=[{key:"_setDomContainer",value:function(t){this.domContainer=t,t.addEventListener("click",this._onClick.bind(this))}},{key:"_onClick",value:function(){this.callback&&this.callback()}}])&&Rt(e.prototype,n),o&&Rt(e,o),u}();function Vt(t){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Dt(t,e,n){return(Dt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ut(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Lt(t,e){return(Lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function It(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=Ut(t);if(e){var r=Ut(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Ht(this,n)}}function Ht(t,e){if(e&&("object"===Vt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ut(t){return(Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zt,Wt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lt(t,e)}(i,bt);var e,n,o,r=It(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this)).domUl=document.createElement("ul"),t}return e=i,(n=[{key:"addButton",value:function(t,e,n,o){var r=new At(e,n,o),i=this._addLine(t);return i.appendChild(r.domSpan),r._setDomContainer(i),r}},{key:"addSlider",value:function(t,e,n,o,r,u){var a=Dt(Ut(i.prototype),"addSlider",this).call(this,t,e,n,o,r,u);return a.domInputText.style.width="18%",a.domSlider.style.width=t?"44%":"80%",a}}])&&Bt(e.prototype,n),o&&Bt(e,o),i}(),Nt={};Nt.refRules={};var Kt=function(t,e,n){var o=function(){if(zt)return zt;for(var t=document.styleSheets,e=0,n=t.length;e<n;++e){var o=t[e].href;if(o&&-1!==o.indexOf("yagui.css"))return zt=t[e]}}();if(o){var r=o.cssRules||o.rules,i=Nt.refRules[t];if(!i){var u=0,a=r.length;for(u=0;u<a&&r[u].selectorText!==t;++u);if(u===a)return!1;i=Nt.refRules[t]=r[u]}i&&(i.style[e]=n)}};Nt.changeWidgetsColor=function(t){var e=_.getStrColor(t);Kt(".gui-button","background",e),Kt(".gui-select","background",e),Kt(".gui-slider > div","background",e),Nt._curWidgetColor=t},Nt.changeDisplayBoorder=function(t){var e=t?"1px solid #000":"0";Kt(".gui-button","border",e),Kt(".gui-select","border",e),Kt(".gui-slider","border",e),Kt(".gui-input-number","border",e),Kt(".gui-sidebar > ul > label","borderTop",e),Kt(".gui-sidebar > ul > label","borderBottom",e),Kt(".gui-sidebar","borderLeft",e),Kt(".gui-sidebar","borderRight",e),Kt(".gui-topbar","borderBottom",e),Nt._curShowBorder=t},Nt.changeBackgroundColor=function(t){Kt(".gui-sidebar","background",_.getStrColor(t));var e=_.getStrColor(_.getColorMult(t,.5));Kt(".gui-topbar","background",e),Kt(".gui-topbar ul > li > ul","background",e),Nt._curBackgroundColor=t},Nt.changeTextColor=function(t){var e=_.getStrColor(t);Kt("*","color",e),Kt(".gui-sidebar > ul > label","color",e),Nt._curTextColor=t},Nt.changeOverallColor=function(t){Nt.changeWidgetsColor(t);var e=_.getColorMult(t,.5);e.length=3,Nt.changeBackgroundColor(e);for(var n=_.getColorAdd(t,.5),o=0;o<3;++o)n[o]=Math.min(.8,n[o]);Nt.changeTextColor(n),Nt._curWidgetColor=t,Nt._curBackgroundColor=e,Nt._curTextColor=n},Nt._curTextColor=[.73,.73,.73,1],Nt._curWidgetColor=[.32,.37,.39,1],Nt._curBackgroundColor=[.24,.24,.24],Nt._curShowBorder=!1,Nt.changeOverallColor([.3,.34,.4,1]);var Gt=Nt;function Ft(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Xt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.domTopbar=document.createElement("div"),this.domTopbar.className="gui-topbar",this.domUl=document.createElement("ul"),this.domTopbar.appendChild(this.domUl),this.callbackResize=e,this.uiExtra={}}var e,n,o;return e=t,(n=[{key:"_updateViewportPosition",value:function(t){var e=this.domTopbar.hidden?0:this.domTopbar.offsetHeight;t.style.top=e+"px",t.style.height=t.clientHeight-e+"px"}},{key:"_onChangeColor",value:function(t,e){t(e),this.uiExtra.overallColor.setValue(Gt._curWidgetColor,!0),this.uiExtra.widgetColor.setValue(Gt._curWidgetColor,!0),this.uiExtra.backColor.setValue(Gt._curBackgroundColor,!0),this.uiExtra.textColor.setValue(Gt._curTextColor,!0)}},{key:"addMenu",value:function(t){var e=new Wt,n=document.createElement("li");return n.setAttribute("onclick","void(0)"),n.innerHTML=t||"",this.domUl.appendChild(n),n.appendChild(e.domUl),e._setDomContainer(n),e}},{key:"addExtra",value:function(){var t=this._onChangeColor,e=this.addMenu("Extra UI"),n=this.uiExtra;return e.addTitle("Overall"),n.overallColor=e.addColor("",Gt._curWidgetColor,t.bind(this,Gt.changeOverallColor)),e.addTitle("Advanced"),n.widgetColor=e.addColor("Widget",Gt._curWidgetColor,t.bind(this,Gt.changeWidgetsColor)),n.backColor=e.addColor("Back",Gt._curBackgroundColor,t.bind(this,Gt.changeBackgroundColor)),n.textColor=e.addColor("Text",Gt._curTextColor,t.bind(this,Gt.changeTextColor)),n.showBorder=e.addCheckbox("Border",Gt._curShowBorder,Gt.changeDisplayBoorder),e}},{key:"setVisibility",value:function(t){this.domTopbar.hidden=!t,this.callbackResize()}}])&&Ft(e.prototype,n),o&&Ft(e,o),t}();function Yt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Zt=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.domMain=document.createElement("div"),this.viewport=e,this.callbackResize=n,this.viewport&&(this.viewport.style.width=document.documentElement.clientWidth+"px",this.viewport.style.height=document.documentElement.clientHeight+"px"),this.cbResize_=this._onWindowResize.bind(this),document.body.appendChild(this.domMain),this.leftSidebar=void 0,this.rightSidebar=void 0,this.topbar=void 0,window.addEventListener("resize",this._onWindowResize.bind(this),!1)}var e,n,o;return e=t,(n=[{key:"_onWindowResize",value:function(){this.viewport&&(this.viewport.style.width=document.documentElement.clientWidth+"px",this.viewport.style.height=document.documentElement.clientHeight+"px",this.viewport.style.left="0px",this.viewport.style.top="0px",this.leftSidebar&&this.leftSidebar._updateViewportPosition(this.viewport),this.rightSidebar&&this.rightSidebar._updateViewportPosition(this.viewport),this.topbar&&this.topbar._updateViewportPosition(this.viewport)),this._updateSidebarsPosition(),this.callbackResize&&this.callbackResize()}},{key:"_updateSidebarsPosition",value:function(){if(this.topbar){var t=this.topbar.domTopbar.offsetHeight;this.leftSidebar&&this.leftSidebar._setTop(t),this.rightSidebar&&this.rightSidebar._setTop(t)}}},{key:"addLeftSidebar",value:function(){this.leftSidebar=new Ot(this.cbResize_);var t=this.leftSidebar.domSidebar;return this.domMain.appendChild(t),this.domMain.appendChild(this.leftSidebar.domResize),this._updateSidebarsPosition(),this.leftSidebar._updateViewportPosition(this.viewport),this.leftSidebar}},{key:"addRightSidebar",value:function(){this.rightSidebar=new Ot(this.cbResize_);var t=this.rightSidebar.domSidebar;return this.domMain.appendChild(t),this.domMain.appendChild(this.rightSidebar.domResize),this.rightSidebar._onTheRight(),this._updateSidebarsPosition(),this.rightSidebar._updateViewportPosition(this.viewport),this.rightSidebar}},{key:"addTopbar",value:function(){return this.topbar=new Xt(this.cbResize_),this.domMain.appendChild(this.topbar.domTopbar),this._updateSidebarsPosition(),this.topbar._updateViewportPosition(this.viewport),this.topbar}},{key:"setVisibility",value:function(t){this.domMain.hidden=!t,this._onWindowResize()}}])&&Yt(e.prototype,n),o&&Yt(e,o),t}();e.default=Zt}])});